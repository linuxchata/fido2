@namespace Shark.Fido2.Sample.Blazor.Client.Components.UI

<div class="button-row">
    <button type="button" 
            id="@Id" 
            name="@Name" 
            class="button @CssClass" 
            @onclick="HandleClick" 
            disabled="@(IsDisabled || IsLoading)">
        @if (Icon != null)
        {
            @Icon
        }
        @if (IsLoading)
        {
            <span>@LoadingText</span>
        }
        else
        {
            @Text
        }
    </button>
</div>

@code {
    [Parameter] public string Text { get; set; } = string.Empty;
    [Parameter] public string Id { get; set; } = string.Empty;
    [Parameter] public string Name { get; set; } = string.Empty;
    [Parameter] public string CssClass { get; set; } = string.Empty;
    [Parameter] public string LoadingText { get; set; } = "Loading...";
    [Parameter] public bool IsDisabled { get; set; }
    [Parameter] public bool IsLoading { get; set; }
    [Parameter] public RenderFragment? Icon { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }

    private async Task HandleClick()
    {
        if (!IsDisabled && !IsLoading)
        {
            await OnClick.InvokeAsync();
        }
    }
}