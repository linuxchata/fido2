@page
@model IndexModel

<div class="main-container">
    <div class="main-section">
        <div class="main-header">
            <h2>Non-discoverable Credentials</h2>
        </div>
        <div class="main-description">
            <p>Non-discoverable credentials, also known as server-side credentials, are stored only on the authenticator and are tied to a specific user identified during authentication (e.g., by username). They offer strong, phishing-resistant security but require the user to provide an identifier during login.</p>
            <p>This page demonstrates non-discoverable credentials. During registration, users must provide both a username and a display name. For authentication, only the username is required.</p>
        </div>
    </div>

    <div class="inner-container">
        <!-- Sign Up Section -->
        <div class="auth-section signup-section">
            <div class="auth-header">
                <h4>Set Up a Passkey</h4>
                <p>Sign up with a passkey for enhanced security</p>
            </div>
            <form id="signupForm">
                <div class="form-group">
                    <label for="signUpUserName">Username</label>
                    <input type="text" id="signUpUserName" name="username" placeholder="Enter your username" required class="form-control">
                </div>
                <div class="form-group">
                    <label for="signUpDisplayName">Display Name</label>
                    <input type="text" id="signUpDisplayName" name="displayname" placeholder="Enter your display name" required class="form-control">
                </div>
                <div class="button-row">
                    <button type="button" id="signUpButton" name="signUpButton" class="btn btn-primary btn-block">Sign Up</button>
                </div>
            </form>
        </div>

        <!-- Sign In Section -->
        <div class="auth-section signin-section">
            <div class="auth-header">
                <h4>Sign In with Passkey</h4>
                <p>Sign in with your passkey</p>
            </div>
            <form id="signinForm">
                <div class="form-group">
                    <label for="signInUserName">Username</label>
                    <input type="text" id="signInUserName" name="username" placeholder="Enter your username" required class="form-control">
                </div>
                <input type="hidden" id="credentialId" name="credentialId" />
                <div class="d-flex gap-2 button-row">
                    <button type="button" id="signInButton" class="btn btn-primary btn-block">Sign In</button>
                    <button type="button" id="credentialsButton" class="btn btn-secondary btn-block hide">Credentials</button>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="disclaimer">
    <p>Passkeys (FIDO2 credentials) are temporarily stored in memory cache for a maximum of 24 hours.</p>
</div>
